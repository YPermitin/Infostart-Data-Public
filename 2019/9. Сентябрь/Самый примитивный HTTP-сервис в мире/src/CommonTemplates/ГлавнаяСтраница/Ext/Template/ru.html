<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><title>Редактируемый SELECT</title><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><style>element.style {
	DISPLAY: block
}
.info {
	MARGIN-TOP: 15px
}
.form-control {
	FONT-SIZE: 16px; BORDER-TOP: #cccccc 1px solid; HEIGHT: 54px; BORDER-RIGHT: #cccccc 1px solid; WIDTH: 100%; BACKGROUND-IMAGE: none; BORDER-BOTTOM: #cccccc 1px solid; COLOR: #555555; PADDING-BOTTOM: 12px; PADDING-TOP: 12px; PADDING-LEFT: 12px; BORDER-LEFT: #cccccc 1px solid; DISPLAY: block; LINE-HEIGHT: 1.8; PADDING-RIGHT: 12px; BACKGROUND-COLOR: #ffffff; border-radius: 0; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s; -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s; transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s
}
INPUT {
	FONT-FAMILY: inherit
}
BUTTON {
	FONT-FAMILY: inherit
}
SELECT {
	FONT-FAMILY: inherit
}
TEXTAREA {
	FONT-FAMILY: inherit
}
LABEL {
	MARGIN-BOTTOM: 5px; MAX-WIDTH: 100%; FONT-WEIGHT: bold; DISPLAY: inline-block
}
INPUT {
	LINE-HEIGHT: normal
}
BUTTON {
	COLOR: ; MARGIN: 0px
}
INPUT {
	COLOR: ; MARGIN: 0px
}
OPTGROUP {
	COLOR: ; MARGIN: 0px
}
SELECT {
	COLOR: ; MARGIN: 0px
}
TEXTAREA {
	COLOR: ; MARGIN: 0px
}
* {
	BOX-SIZING: border-box; -webkit-box-sizing: border-box; -moz-box-sizing: border-box
}
UNKNOWN {
	PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px
}
user agent stylesheetinput {
	CURSOR: auto; BORDER-TOP: 2px inset; BORDER-RIGHT: 2px inset; BORDER-BOTTOM: 2px inset; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 1px; BORDER-LEFT: 2px inset; PADDING-RIGHT: 1px; BACKGROUND-COLOR: white; -webkit-appearance: textfield; border-image-source: initial; border-image-slice: initial; border-image-width: initial; border-image-outset: initial; border-image-repeat: initial; -webkit-rtl-ordering: logical; -webkit-user-select: text
}
user agent stylesheetinput {
	WORD-SPACING: normal; TEXT-TRANSFORM: none; COLOR: ; FONT: 13px Arial; MARGIN: 0em; DISPLAY: inline-block; LETTER-SPACING: normal; TEXT-INDENT: 0px; text-rendering: auto; text-shadow: none
}
TEXTAREA {
	WORD-SPACING: normal; TEXT-TRANSFORM: none; COLOR: ; FONT: 13px Arial; MARGIN: 0em; DISPLAY: inline-block; LETTER-SPACING: normal; TEXT-INDENT: 0px; text-rendering: auto; text-shadow: none
}
keygen {
	WORD-SPACING: normal; TEXT-TRANSFORM: none; COLOR: ; FONT: 13px Arial; MARGIN: 0em; DISPLAY: inline-block; LETTER-SPACING: normal; TEXT-INDENT: 0px; text-rendering: auto; text-shadow: none
}
SELECT {
	WORD-SPACING: normal; TEXT-TRANSFORM: none; COLOR: ; FONT: 13px Arial; MARGIN: 0em; DISPLAY: inline-block; LETTER-SPACING: normal; TEXT-INDENT: 0px; text-rendering: auto; text-shadow: none
}
BUTTON {
	WORD-SPACING: normal; TEXT-TRANSFORM: none; COLOR: ; FONT: 13px Arial; MARGIN: 0em; DISPLAY: inline-block; LETTER-SPACING: normal; TEXT-INDENT: 0px; text-rendering: auto; text-shadow: none
}
user agent stylesheetinput {
	-webkit-writing-mode: horizontal-tb
}
TEXTAREA {
	-webkit-writing-mode: horizontal-tb
}
keygen {
	-webkit-writing-mode: horizontal-tb
}
SELECT {
	-webkit-writing-mode: horizontal-tb
}
BUTTON {
	-webkit-writing-mode: horizontal-tb
}
meter {
	-webkit-writing-mode: horizontal-tb
}
progress {
	-webkit-writing-mode: horizontal-tb
}
Inherited from DIV#MainPanel STYLE Attribute {
	MARGIN-BOTTOM: 1px; WIDTH: 100%
}
Inherited from BODY.contentpage-with-nav BODY {
	FONT-SIZE: 16px; FONT-FAMILY: "Helvetica Neue", Helvetica, Arial, sans-serif; COLOR: #696f6f; LINE-HEIGHT: 1.8; BACKGROUND-COLOR: #ffffff
}
Inherited from HTML.no-js HTML {
	FONT-SIZE: 10px; -webkit-tap-highlight-color: rgba(0, 0, 0, 0)
}
HTML {
	FONT-FAMILY: sans-serif; -MS-TEXT-SIZE-ADJUST: 100%; -webkit-text-size-adjust: 100%
}
Pseudo :before element *:before {
	BOX-SIZING: border-box; -webkit-box-sizing: border-box; -moz-box-sizing: border-box
}
*:after {
	BOX-SIZING: border-box; -webkit-box-sizing: border-box; -moz-box-sizing: border-box
}
Pseudo :after element *:before {
	BOX-SIZING: border-box; -webkit-box-sizing: border-box; -moz-box-sizing: border-box
}
*:after {
	BOX-SIZING: border-box; -webkit-box-sizing: border-box; -moz-box-sizing: border-box
}
</style><script src="//code.jquery.com/jquery-1.12.4.min.js"></script><script src="//rawgithub.com/indrimuska/jquery-editable-select/master/dist/jquery-editable-select.min.js"></script><link rel="stylesheet" href="//rawgithub.com/indrimuska/jquery-editable-select/master/dist/jquery-editable-select.min.css"></link><meta name="GENERATOR" content="MSHTML 11.00.10570.1001"></meta></head><body><header><h2>Получение информации о товаре с помощью HTTP-сервисов</h2></header><section id="Cities"><label id="LabelSelect">Товар:</label> <select id="OriginalSelect" class="form-control"></select></section><section id="AdditionalInformation" class="info"><label id="AddInfo">Информация о товаре</label> 
<div id="FULLNAME"><label id="FullNameLabel">Полное наименование:</label> <label id="CodeFullNameValue"></label></div>
<div id="CODE"><label id="ArtLabel">Артикул:</label> <label id="ArtValue"></label></div>
<div id="ART"><label id="CodeLabel">Код:</label> <label id="CodeValue"></label></div>
<div id="DESCR"><label id="DescrLabel">Описание:</label> <label id="DescrValue"></label></div></section><script>       
        $(function () {
            $("#OriginalSelect")
            	.editableSelect();
				
			$("#OriginalSelect")
				.on('input', function () {
					
					var query = $("#OriginalSelect").val();
            		updateList(query);
					
				})
        	})
        	.on('select.editable-select', function (e, li) {
				
        		var GUID = $(li).attr('data-value');
        		
        		try {
                                $.ajax({
                                    type: "POST",
                                    contentType: "application/json;charset=utf-8",
                                    url: "http://{ServerName}/{DatabaseName}/hs/PrimitiveService/info",
                                    data: "{ \"GUID\": \"" + GUID + "\" }",
                                    dataType: "json",
                                    success: function (queryResult) {
                                        try {
                                            var Code = queryResult[0].Code;
                                            var FullName = queryResult[0].FullName;
                                            var Art = queryResult[0].Art;
                                            var Descr = queryResult[0].Descr;

                                            $('#ArtValue').text(Art);
                                            $('#CodeValue').text(Code);
                                            $('#DescrValue').text(Descr);
                                            $('#CodeFullNameValue').text(FullName);
                                        } catch (e) {

                                        }
                                    }
                                });
                            }
                            catch (ex) {
                                alert("Error");
                            }
        	
			})
			.on('created.editable-select', function (e) {
				
				updateList('');
			
			});
        
        function updateList(query) {
        
        	var originalSelect = $("#OriginalSelect");
        	var listElement = originalSelect.next();
        	listElement.empty();
        	
            	$.ajax({
            		type: "POST",
                    contentType: "application/json;charset=utf-8",
                    url: "http://{ServerName}/{DatabaseName}/hs/PrimitiveService/products",
                    data: "{ \"query\": \"" + query + "\" }",
                    dataType: "json",
                    success: function (queryResult) {
                    	try {
                        	for (var i = 0; i < queryResult.length; i++) {
                            	var item = queryResult[i];                                                                
                                originalSelect.editableSelect('add', function() {
                                	
                                	$(this).attr('data-value', item.GUID);
                                	$(this).text(item.Name);
                                
                                })                                                                
                            }
                     	} catch (e) {
							alert('Wow! Error!!!');
                        }
                    }
              	});
        }
</script></body></html>